{{template "layout" .}}

{{define "content"}}
<div class="dashboard">
    <header class="page-header">
        <h1>Services</h1>
        <a href="/projects/new" class="btn btn-primary">+ New Service</a>
    </header>

    {{if .Projects}}
    <div class="service-grid">
        {{range .Projects}}
        <div class="service-card">
            <div class="service-header">
                <h3 class="service-name">{{.Name}}</h3>
                <span class="status-badge status-{{.Status}}">{{.Status}}</span>
            </div>
            <p class="service-desc">{{.Description}}</p>
            <div class="service-meta">
                <span class="meta-item">
                    <span class="meta-icon">ğŸ“</span>
                    {{if .WorkingDir}}{{.WorkingDir}}{{else}}/{{end}}
                </span>
                <span class="meta-item">
                    <span class="meta-icon">ğŸ‘¤</span>
                    {{.User}}
                </span>
            </div>
            <div class="service-actions">
                {{if eq .Status "running"}}
                <form method="POST" action="/projects/{{.ID}}/stop" class="inline-form">
                    <button type="submit" class="btn btn-danger btn-sm">Stop</button>
                </form>
                <form method="POST" action="/projects/{{.ID}}/restart" class="inline-form">
                    <button type="submit" class="btn btn-warning btn-sm">Restart</button>
                </form>
                {{else if eq .Status "stopped"}}
                <form method="POST" action="/projects/{{.ID}}/start" class="inline-form">
                    <button type="submit" class="btn btn-success btn-sm">Start</button>
                </form>
                {{else}}
                <form method="POST" action="/projects/{{.ID}}/install" class="inline-form">
                    <button type="submit" class="btn btn-primary btn-sm">Install</button>
                </form>
                {{end}}
                <a href="/projects/{{.ID}}" class="btn btn-secondary btn-sm">View</a>
            </div>
        </div>
        {{end}}
    </div>
    {{else}}
    <div class="empty-state">
        <div class="empty-icon">ğŸš€</div>
        <h2>No services yet</h2>
        <p>Create your first service to get started</p>
        <a href="/projects/new" class="btn btn-primary">Create Service</a>
    </div>
    {{end}}
</div>
{{end}}